# HBnB RESTful API - Part 3

## âœ¨ Description

HBnB is a modular RESTful API built with Flask. It manages users, places, amenities, and reviews. This application is part two of the Holberton School HBnB project, focused on the presentation and business logic layers.

---

## ğŸ›‚ Main Features

* User management (registration, update, roles)
* Creation and display of places
* Amenity management (many-to-many)
* Adding reviews and ratings
* Relational MySQL database
* Automated testing with Pytest

---

## ğŸ“ Project Structure

```
part3/
.
â”œâ”€â”€ README.md
â”œâ”€â”€ app
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ api
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ v1
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ amenities.py
â”‚   â”‚       â”œâ”€â”€ auth.py
â”‚   â”‚       â”œâ”€â”€ places.py
â”‚   â”‚       â”œâ”€â”€ reviews.py
â”‚   â”‚       â””â”€â”€ users.py
â”‚   â”œâ”€â”€ config.py
â”‚   â”œâ”€â”€ models
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ amenity.py
â”‚   â”‚   â”œâ”€â”€ basemodel.py
â”‚   â”‚   â”œâ”€â”€ place.py
â”‚   â”‚   â”œâ”€â”€ review.py
â”‚   â”‚   â””â”€â”€ user.py
â”‚   â”œâ”€â”€ persistence
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ repository.py
â”‚   â”œâ”€â”€ services
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ facade.py
â”‚   â”‚   â””â”€â”€ repositories
â”‚   â”‚       â”œâ”€â”€ amenity_repository.py
â”‚   â”‚       â”œâ”€â”€ place_repository.py
â”‚   â”‚       â”œâ”€â”€ review_repository.py
â”‚   â”‚       â””â”€â”€ user_repository.py
â”‚   â””â”€â”€ test_models
â”‚       â”œâ”€â”€ test_amenity.py
â”‚       â”œâ”€â”€ test_place.py
â”‚       â”œâ”€â”€ test_review.py
â”‚       â””â”€â”€ test_user.py
â”œâ”€â”€ config.py
â”œâ”€â”€ er_diagram.png
â”œâ”€â”€ hbnb_db.sql
â”œâ”€â”€ instance
â”‚   â””â”€â”€ development.db
â”œâ”€â”€ manual_review.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ run.py
â”œâ”€â”€ test_database.py
â””â”€â”€ tests
    â””â”€â”€ test_full_api.py


---

## ğŸ“¬ Endpoints Overview

| Resource  | Endpoint                  | Methods       | Description                    |
|-----------|---------------------------|---------------|--------------------------------|
| Users     | `/api/v1/users/`          | GET, POST     | List or create users           |
| Users     | `/api/v1/users/<id>`      | GET, PUT      | Retrieve or update a user      |
| Places    | `/api/v1/places/`         | GET, POST     | List or create places          |
| Reviews   | `/api/v1/reviews/`        | GET, POST     | List or create reviews         |
| Reviews   | `/api/v1/reviews/<id>`    | GET, DELETE   | Retrieve or delete a review    |
| Amenities | `/api/v1/amenities/`      | GET, POST     | List or create amenities       |

## âœ… Features

- Flask-based REST API with clean modular structure
- In-memory data storage (easily swappable with database)
- CRUD endpoints for users, places, reviews, and amenities
- Centralized facade layer for orchestrating business logic
- Integrated Swagger UI documentation (`/api/v1/`)

---

## âš™ï¸ Installation

### 1. Clone the repository

```bash
git clone https://github.com/JulienPul/holbertonschool-hbnb.git
cd holbertonschool-hbnb/part2
```

### 2. Create and activate a virtual environment

```bash
python3 -m venv venv
source venv/bin/activate
```

### 3. Install dependencies

```bash
pip install -r requirements.txt
```

---

## ğŸš€ Running the App

```bash
python3 run.py
```
Flask-RESTx auto-generates a Swagger UI interface
Open your browser at:  
ğŸ‘‰ [http://127.0.0.1:5000/api/v1/](http://127.0.0.1:5000/api/v1/)

You will see the **Swagger UI**, auto-generated by Flask-RESTx.
Use it to explore and test the available endpoints with schemas and example responses.
---

## ğŸ”§ Configuration

The file `config.py` defines application settings. You can switch between environments by changing:

```python
config = {
    'development': DevelopmentConfig,
    'default': DevelopmentConfig
}
```

---

## ğŸ§  Business Logic Layer

The models/ directory defines core domain entities. Each class encapsulates its own validation rules and behavior.

User
Represents a user of the platform.

```python
from app.models.user import User

user = User("Julien", "Pulon", "julien@example.com")
print(user.to_dict())
```

Review
Represents a review left by a user on a place.

```python
from app.models.place import Place

place = Place("Villa", "Beachfront house", 200.0, 43.6, 1.5, user)
```

```bash
git clone https://github.com/JulienPul/holbertonschool-hbnb.git
cd holbertonschool-hbnb/part3
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

```bash
source venv/bin/activate
mysql -u root -p < hbnb_db.sql
mysql -u root -p hbnb_db < test.sql
python run.py
```

---

## ğŸ“š Tests

### ğŸ”¬ Unit Tests with Pytest

File: `test_database.py`

* Checks for required tables
* Verifies admin user presence
* Validates foreign keys and constraints

```bash
PYTHONPATH=. pytest tests/test_full_api.py -v
```
Complete pytest test file  for api and models at part2/app/api/test_user.py
Make sure `run.py` and `create_app()` are correctly configured to accept the in-memory repository.

### Manual Tests with cURL

#### âœ… Create a User

```bash
curl -X POST http://127.0.0.1:5000/api/v1/users/ -H "Content-Type: application/json" -d '{
  "first_name": "John",
  "last_name": "Doe",
  "email": "john@example.com"
}'
```

#### âŒ Invalid Email

```bash
curl -X POST http://127.0.0.1:5000/api/v1/users/ -H "Content-Type: application/json" -d '{
  "first_name": "",
  "last_name": "Doe",
  "email": "notanemail"
}'
```

---

## ğŸ“š Technologies

- Python 3.8+
- Flask
- Flask-RESTx
- REST principles
- Clean architecture

---

## ğŸ§¾ License

This project is part of the Holberton School curriculum and is intended for educational purposes only.

## Authors
developpers :
Haggui Razafimaitso
github: https://github.com/hagguishel
Julien Pulon
github: https://github.com/JulienPul
updated: 20/06/2025
